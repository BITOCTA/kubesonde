<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="336px" preserveAspectRatio="none" style="width:885px;height:336px;background:#FFFFFF;" version="1.1" viewBox="0 0 885 336" width="885px" zoomAndPan="magnify"><defs/><g><!--MD5=[2b2d5ad518bf6746de4ffeb5be0566d4]
entity manager--><g id="elem_manager"><rect fill="#F1F1F1" height="44" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="173" x="157.5" y="7"/><rect fill="#F1F1F1" height="10" style="stroke:#181818;stroke-width:0.5;" width="15" x="310.5" y="12"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="308.5" y="14"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="308.5" y="18"/><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacing" textLength="133" x="172.5" y="37.7803">Kubesonde manager</text></g><!--MD5=[439c11c09b2ae77ef318d81d8a06ab13]
entity el--><g id="elem_el"><rect fill="#F1F1F1" height="44" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="126" x="140" y="140"/><rect fill="#F1F1F1" height="10" style="stroke:#181818;stroke-width:0.5;" width="15" x="246" y="145"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="244" y="147"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="244" y="151"/><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacing" textLength="86" x="155" y="170.7803">Event listener</text></g><!--MD5=[c77a7a9f565a0b8e82ce4b35a94c8a45]
entity task--><g id="elem_task"><rect fill="#F1F1F1" height="44" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="184" x="638" y="140"/><rect fill="#F1F1F1" height="10" style="stroke:#181818;stroke-width:0.5;" width="15" x="802" y="145"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="800" y="147"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="800" y="151"/><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacing" textLength="144" x="653" y="170.7803">Recurring probing task</text></g><!--MD5=[6a1970ebd99cd4888de09cc26ab6464d]
entity netinfo--><g id="elem_netinfo"><rect fill="#F1F1F1" height="44" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="139" x="441.5" y="140"/><rect fill="#F1F1F1" height="10" style="stroke:#181818;stroke-width:0.5;" width="15" x="560.5" y="145"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="558.5" y="147"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="558.5" y="151"/><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacing" textLength="99" x="456.5" y="170.7803">Netinfo process</text></g><!--MD5=[ec48bfac5ac9939ddf8449ba4fc5b0f1]
entity np--><g id="elem_np"><ellipse cx="33" cy="301" fill="#F1F1F1" rx="12" ry="12" style="stroke:#181818;stroke-width:0.5;"/><line style="stroke:#181818;stroke-width:0.5;" x1="21" x2="45" y1="315" y2="315"/><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacing" textLength="54" x="6" y="327.7803">new pod</text></g><!--MD5=[4c2941fc370d514d93699c1b32a2ff4b]
entity k8s--><g id="elem_k8s"><path d="M490.5,289 L490.5,313 M490.5,301 L507.5,301 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><ellipse cx="519.5" cy="301" fill="#F1F1F1" rx="12" ry="12" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacing" textLength="106" x="458" y="327.7803">Kubernetes APIs</text></g><!--MD5=[a5a6ae0ba01c8a4589ab26bd33e87aad]
entity storage--><g id="elem_storage"><path d="M641.5,10 L641.5,34 M641.5,22 L658.5,22 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><ellipse cx="670.5" cy="22" fill="#F1F1F1" rx="12" ry="12" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacing" textLength="50" x="637" y="48.7803">Storage</text></g><!--MD5=[c2de35a5f955f7e7adf8d8d96d584d58]
entity apis--><g id="elem_apis"><path d="M487.5,10 L487.5,34 M487.5,22 L504.5,22 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><ellipse cx="516.5" cy="22" fill="#F1F1F1" rx="12" ry="12" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacing" textLength="109" x="453.5" y="48.7803">HTTP REST Apis</text></g><!--MD5=[87277bc55409594c2e7f2bbd73016655]
link manager to el--><g id="link_manager_el"><path d="M235.85,51.12 C232.34,60.52 228.29,71.75 225,82 C219.4,99.41 213.88,119.25 209.77,134.68 " fill="none" id="manager-to-el" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="208.43,139.74,214.6055,132.0677,209.713,134.9074,206.8733,130.0149,208.43,139.74" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[77e869c09502de5724af361ea5ea38df]
link manager to task--><g id="link_manager_task"><path d="M330.72,47.32 C370.81,56.2 418.78,68.09 461,82 C491.26,91.97 496.79,99.87 527,110 C561.07,121.43 599.11,131.64 632.96,139.86 " fill="none" id="manager-to-task" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="637.93,141.06,630.1187,135.0614,633.0694,139.8877,628.243,142.8384,637.93,141.06" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[2bbbf0684e9060747599b1d9df089e89]
link manager to netinfo--><g id="link_manager_netinfo"><path d="M244.02,51.1 C245.21,69.29 249.93,94.92 266,110 C290.3,132.81 373.48,146.6 436.24,153.99 " fill="none" id="manager-to-netinfo" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="441.48,154.59,432.9956,149.5884,436.5127,154.019,432.0821,157.5361,441.48,154.59" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[789e307ecb1e9bffa774c06ea1205cfe]
reverse link el to np--><g id="link_el_np"><path d="M135.03,174.46 C92.32,183.19 42.95,196.67 30,214 C14.91,234.18 19.32,264.3 25.08,284.75 " fill="none" id="el-backto-np" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="139.93,173.47,130.3179,171.3235,135.0282,174.4561,131.8956,179.1664,139.93,173.47" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="Helvetica" font-size="13" lengthAdjust="spacing" textLength="128" x="31" y="238.0103">(1) Event is generated</text></g><!--MD5=[ce0f7e7525abee73ff15ead241f67866]
link el to k8s--><g id="link_el_k8s"><path d="M203.89,189.34 C206.06,210.19 212.53,238.48 231,255 C263.04,283.64 380.66,297.36 452.88,303.22 " fill="none" id="el-k8s" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="458,303.63,449.3498,298.9211,453.0161,303.229,448.7082,306.8953,458,303.63" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="203.43,184.2,200.242,193.5186,203.8724,189.1804,208.2106,192.8108,203.43,184.2" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="Helvetica" font-size="13" lengthAdjust="spacing" textLength="225" x="250.5" y="225.0103">(2) Install debug and netinfo containers</text><text fill="#000000" font-family="Helvetica" font-size="13" lengthAdjust="spacing" textLength="266" x="232" y="238.0103">(3) Get declarative pod networking information</text><text fill="#000000" font-family="Helvetica" font-size="13" lengthAdjust="spacing" textLength="149" x="290.5" y="251.0103">(4) Run probing command</text></g><!--MD5=[768c7d7c0d9cd05ce4ad9515a2016b3b]
reverse link storage to el--><g id="link_storage_el"><path d="M631.64,39.09 C616.27,43.44 597.26,48.47 580,52 C487.2,70.97 459.69,54.67 369,82 C322.09,96.14 271.75,121.72 238.97,139.95 " fill="none" id="storage-backto-el" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="636.7,37.64,626.9437,36.2932,631.8962,39.0268,629.1626,43.9793,636.7,37.64" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="Helvetica" font-size="13" lengthAdjust="spacing" textLength="126" x="383" y="93.0103">(5) Store probe output</text><text fill="#000000" font-family="Helvetica" font-size="13" lengthAdjust="spacing" textLength="156" x="370" y="106.0103">and declarative information</text></g><!--MD5=[3362eb5cf6223368af5adec3ff170a9c]
link netinfo to k8s--><g id="link_netinfo_k8s"><path d="M509.14,189.62 C508.67,197.47 508.23,206.08 508,214 C507.46,232.21 507.48,236.79 508,255 C508.23,263.01 508.66,271.69 509.12,279.64 " fill="none" id="netinfo-k8s" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="509.45,285,512.9022,275.776,509.1497,280.009,504.9167,276.2565,509.45,285" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="509.47,184.33,504.9117,193.0605,509.1554,189.3201,512.8959,193.5638,509.47,184.33" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="Helvetica" font-size="13" lengthAdjust="spacing" textLength="147" x="533.5" y="231.5103">(a) Monitor listening ports</text><text fill="#000000" font-family="Helvetica" font-size="13" lengthAdjust="spacing" textLength="200" x="509" y="244.5103">(b) Run probes to discovered ports</text></g><!--MD5=[4535b0be760849f6b76983bb9a41ee5f]
reverse link storage to netinfo--><g id="link_storage_netinfo"><path d="M631.91,39.54 C609.25,47.91 578.5,61.9 557,82 C539.61,98.26 526.8,122.58 519.18,139.94 " fill="none" id="storage-backto-netinfo" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="636.62,37.84,626.7968,37.1302,631.9165,39.5361,629.5105,44.6558,636.62,37.84" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="Helvetica" font-size="13" lengthAdjust="spacing" textLength="118" x="558" y="93.0103">(c) Store pod netinfo</text><text fill="#000000" font-family="Helvetica" font-size="13" lengthAdjust="spacing" textLength="64" x="585" y="106.0103">and probes</text></g><!--MD5=[721ec576843c19520a2f2a7bfda78f7f]
link storage to task--><g id="link_storage_task"><path d="M670.99,52.12 C677.83,68.41 687.79,90.93 698,110 C702.5,118.4 707.85,127.28 712.87,135.23 " fill="none" id="storage-to-task" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="715.62,139.55,714.1329,129.8141,712.9227,135.3399,707.3968,134.1297,715.62,139.55" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="Helvetica" font-size="13" lengthAdjust="spacing" textLength="80" x="699" y="93.0103">(i) Get current</text><text fill="#000000" font-family="Helvetica" font-size="13" lengthAdjust="spacing" textLength="39" x="719.5" y="106.0103">probes</text></g><!--MD5=[7b00ae27db48c1bcbd9caaa7bafc3294]
reverse link storage to task--><g id="link_storage_task"><path d="M692.27,33.53 C721.34,38.7 763.74,51.35 784,82 C797.1,101.82 778.71,124.15 759.93,140 " fill="none" id="storage-backto-task" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="687,32.65,695.2276,38.0636,691.9331,33.465,696.5317,30.1706,687,32.65" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="Helvetica" font-size="13" lengthAdjust="spacing" textLength="88" x="789" y="99.5103">(iii) Store result</text></g><!--MD5=[9365e8ec0d87a05e5c1f965ebae27cd3]
link task to k8s--><g id="link_task_k8s"><path d="M732.56,189.11 C733.07,209.57 730.23,237.44 714,255 C694.56,276.03 622.27,290.86 569.47,299.16 " fill="none" id="task-k8s" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="564.43,299.94,573.9392,302.5043,569.3702,299.169,572.7055,294.6,564.43,299.94" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="732.37,184.07,728.7329,193.2227,732.5698,189.066,736.7265,192.9029,732.37,184.07" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="Helvetica" font-size="13" lengthAdjust="spacing" textLength="119" x="732" y="238.0103">(ii) Run probes again</text></g><!--MD5=[f22a7697e36a443e1ea1f0805a8d66ce]
link manager to apis--><g id="link_manager_apis"><path d="M330.81,29 C369.34,29 413.71,29 448.42,29 " fill="none" id="manager-to-apis" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="453.47,29,444.47,25,448.47,29,444.47,33,453.47,29" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="Helvetica" font-size="13" lengthAdjust="spacing" textLength="86" x="349" y="22.0103">Publish results</text></g><!--MD5=[f13f7b989eaa85ef826b0e3dd3601ece]
@startuml Detailed view
skinparam defaultFontName Helvetica
component "Kubesonde manager" as manager
component "Event listener" as el 
component "Recurring probing task" as task
component "Netinfo process" as netinfo
entity "new pod" as np
boundary "Kubernetes APIs" as k8s
boundary "Storage" as storage
boundary "HTTP REST Apis" as apis
manager -down-> el
manager -down-> task
manager -down-> netinfo
np -up-> el : (1) Event is generated
el <-down-> k8s : (2) Install debug and netinfo containers \n(3) Get declarative pod networking information\n(4) Run probing command
el -up-> storage: (5) Store probe output \nand declarative information
netinfo <-down-> k8s : (a) Monitor listening ports \n(b) Run probes to discovered ports
netinfo -up-> storage : (c) Store pod netinfo\nand probes
task <-up- storage : (i) Get current\nprobes
task <-down-> k8s : (ii) Run probes again
task -up-> storage: (iii) Store result
manager -> apis : Publish results
@enduml

PlantUML version 1.2022.5(Sat Apr 30 13:55:52 EEST 2022)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: FI
--></g></svg>